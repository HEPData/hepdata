{%- extends "hepdata_dashboard/dashboard.html" %}

{% block dashboard_content %}

    {{ webpack['dc.css'] }}
    {{ webpack['hepdata-submission.css'] }}

    <div class="container-fluid">
        <div class="row-fluid breadcrumb">
            <a href="{{ ctx.dashboard_url }}"><i class="fa fa-chevron-left"></i> Back to Dashboard</a>
        </div>

        <div class="row-fluid submissions-overview-header">
          <div class="col-md-11">
            <h3>Submissions Overview:</h3>
            <p>
            {% if ctx.user_is_admin %}
               Showing all submissions from 2017 onwards
            {% else %}
               Showing submissions from 2017 onwards for which you are Coordinator
            {% endif %}
            </p>
          </div>
          <div class="col-md-1">
            <a id="submissions-vis-reset" class="btn btn-primary">Reset filters</a>
          </div>
        </div>

        <div id="submissions-dashboard-loader" class="loader"></div>

        <div id="submissions-dashboard-contents" style="display:none">

        <div class="row-fluid visualization-container">
            <div id="time-series" class="col-md-12">
                <h4>Submissions By Last Update Time</h4>
                <div id="submission_vis"></div>
            </div>

        </div>

        <div class="clearfix"></div>
        <br/>

        <div class="row-fluid visualization-container">


            <div class="col-md-8">
                <div class="row-fluid">
                    <div id="collaboration" class="col-md-6">
                        <h4>Collaboration <span class="text-muted text-small">TOP 10</span></h4>
                        <br/>
                        <div id="collaboration_vis"></div>
                    </div>

                    <div id="coordinator" class="col-md-6">
                        <h4>Coordinator <span class="text-muted text-small">TOP 10</span></h4>
                        <br/>
                        <div id="coordinator_vis"></div>
                    </div>
                </div>


                <div class="clearfix"></div>
                <br/>

                <div id="time-series" class="col-md-6">
                    <h4>Data Records Per Submission</h4>
                    <br/>
                    <div id="data_count_vis"></div>
                </div>

                <div id="status" class="col-md-3">
                    <h4>Submission Status</h4>
                    <br/>
                    <div id="status_vis"></div>
                </div>

                <div id="version" class="col-md-3">
                    <h4>Version</h4>
                    <br/>
                    <div id="version_vis"></div>
                </div>
            </div>

            <div class="col-md-4">
                <div id="participants">
                    <h4>Submission Participants <span class="text-muted text-small">TOP 20</span></h4>
                    <div id="participants_vis">
                    </div>
                </div>
            </div>

        </div>


        <div class="clearfix"></div>
        <br/>

        <div class="row-fluid" style="overflow:hidden;">
            <div id="table-view" class="col-md-12">
                <div class="row-fluid visualization-container">
                    <div class="col-md-12 col-sm-10 col-xs-8">
                        <h4>Detailed Submission Information
                        </h4>
                        <br/>
                        <div class="visualization-panel col-md-12 scrollable">


                            <table id="data_table" class="table dc-data-table">

                                <thead>
                                <tr class="header">
                                    <th></th>
                                    <th>Inspire ID</th>
                                    <th>Title</th>
                                    <th>Data Count</th>
                                    <th>Status</th>
                                    <th>Collaboration</th>
                                    <th>Submission Participants</th>
                                </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        </div>
    </div>

{% endblock %}

{%- block javascript %}

    {{ webpack['hepdata-dashboard-submissions-vis-js.js'] }}

{% endblock %}
